{
  "openapi": "3.0.0",
  "info": {
    "title": "YFinance API",
    "description": "YFinanceを使用した株式データ取得API",
    "version": "1.0.0",
    "contact": {
      "name": "YFinance API Support"
    }
  },
  "servers": [
    {
      "url": "https://zwtiey61i2.execute-api.ap-northeast-1.amazonaws.com/prod/",
      "description": "Production server"
    }
  ],
  "paths": {
    "/price": {
      "get": {
        "summary": "株価取得",
        "description": "指定されたティッカーシンボルの現在の株価を取得します",
        "parameters": [
          {
            "name": "ticker",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ティッカーシンボル（例: AAPL, MSFT, 7203.T）"
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "symbol": {
                      "type": "string",
                      "example": "AAPL"
                    },
                    "price": {
                      "type": "number",
                      "example": 208.62
                    },
                    "currency": {
                      "type": "string",
                      "example": "USD"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "バッドリクエスト",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/info": {
      "get": {
        "summary": "詳細情報取得",
        "description": "指定されたティッカーシンボルの詳細な企業情報を取得します",
        "parameters": [
          {
            "name": "ticker",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ティッカーシンボル（例: AAPL, MSFT, 7203.T）"
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "symbol": {
                      "type": "string",
                      "example": "AAPL"
                    },
                    "name": {
                      "type": "string",
                      "example": "Apple Inc."
                    },
                    "currentPrice": {
                      "type": "number",
                      "example": 208.62
                    },
                    "previousClose": {
                      "type": "number",
                      "example": 211.16
                    },
                    "marketCap": {
                      "type": "number",
                      "example": 3115906498560
                    },
                    "dividendYield": {
                      "type": "number",
                      "example": 0.51
                    },
                    "trailingPE": {
                      "type": "number",
                      "example": 32.44
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "バッドリクエスト",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/history": {
      "get": {
        "summary": "株価履歴取得",
        "description": "指定されたティッカーシンボルの株価履歴データを取得します",
        "parameters": [
          {
            "name": "ticker",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ティッカーシンボル（例: AAPL, MSFT, 7203.T）"
          },
          {
            "name": "period",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "1d",
                "5d",
                "1mo",
                "3mo",
                "6mo",
                "1y",
                "2y",
                "5y",
                "10y",
                "ytd",
                "max"
              ],
              "default": "1mo"
            },
            "description": "期間（デフォルト: 1mo）"
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "symbol": {
                      "type": "string",
                      "example": "AAPL"
                    },
                    "period": {
                      "type": "string",
                      "example": "1mo"
                    },
                    "data": {
                      "type": "object",
                      "additionalProperties": {
                        "type": "object",
                        "properties": {
                          "Open": {
                            "type": "number",
                            "example": 209.93
                          },
                          "High": {
                            "type": "number",
                            "example": 210.91
                          },
                          "Low": {
                            "type": "number",
                            "example": 207.54
                          },
                          "Close": {
                            "type": "number",
                            "example": 208.62
                          },
                          "Volume": {
                            "type": "number",
                            "example": 38711400
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "バッドリクエスト",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/news": {
      "get": {
        "summary": "ニュース取得",
        "description": "指定されたティッカーシンボルに関連する最新ニュースを取得します",
        "parameters": [
          {
            "name": "ticker",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ティッカーシンボル（例: AAPL, MSFT, 7203.T）"
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "400": {
            "description": "バッドリクエスト",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/dividends": {
      "get": {
        "summary": "配当情報取得",
        "description": "指定されたティッカーシンボルの配当情報を取得します",
        "parameters": [
          {
            "name": "ticker",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ティッカーシンボル（例: AAPL, MSFT, 7203.T）"
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "400": {
            "description": "バッドリクエスト",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/options": {
      "get": {
        "summary": "オプション情報取得",
        "description": "指定されたティッカーシンボルのオプション情報を取得します",
        "parameters": [
          {
            "name": "ticker",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ティッカーシンボル（例: AAPL, MSFT, 7203.T）"
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "400": {
            "description": "バッドリクエスト",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/financials": {
      "get": {
        "summary": "財務情報取得",
        "description": "指定されたティッカーシンボルの財務情報を取得します",
        "parameters": [
          {
            "name": "ticker",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ティッカーシンボル（例: AAPL, MSFT, 7203.T）"
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "400": {
            "description": "バッドリクエスト",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/analysts": {
      "get": {
        "summary": "アナリスト予想取得",
        "description": "指定されたティッカーシンボルのアナリスト予想情報を取得します",
        "parameters": [
          {
            "name": "ticker",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ティッカーシンボル（例: AAPL, MSFT, 7203.T）"
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          },
          "400": {
            "description": "バッドリクエスト",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/search": {
      "get": {
        "summary": "銘柄検索",
        "description": "キーワードによる銘柄検索を実行します",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "検索キーワード（例: apple, microsoft）"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10
            },
            "description": "検索結果件数（デフォルト: 10）"
          },
          {
            "name": "region",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "US",
                "JP"
              ],
              "default": "US"
            },
            "description": "検索リージョン（デフォルト: US）"
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "query": {
                      "type": "string",
                      "example": "apple"
                    },
                    "region": {
                      "type": "string",
                      "example": "US"
                    },
                    "count": {
                      "type": "integer",
                      "example": 7
                    },
                    "results": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "symbol": {
                            "type": "string",
                            "example": "AAPL"
                          },
                          "name": {
                            "type": "string",
                            "example": "Apple Inc."
                          },
                          "exchange": {
                            "type": "string",
                            "example": "NMS"
                          },
                          "type": {
                            "type": "string",
                            "example": "Equity"
                          },
                          "score": {
                            "type": "number",
                            "example": 31292.0
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "バッドリクエスト",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Error": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "example": "エラーメッセージ"
          },
          "status": {
            "type": "string",
            "example": "error"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "example": "2025-07-17T14:28:34.224689Z"
          }
        }
      }
    }
  }
}