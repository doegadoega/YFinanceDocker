# YFinance Docker ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

YFinanceã‚’ä½¿ç”¨ã—ãŸ**å®Œå…¨çµ±ä¸€ã•ã‚ŒãŸæ ªå¼ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚·ã‚¹ãƒ†ãƒ **ã‚’ã€Lambdaã€Dockerã€ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œã®3ã¤ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§æä¾›ã—ã¾ã™ã€‚

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç‰¹å¾´

### âœ… å®Œå…¨çµ±ä¸€ã•ã‚ŒãŸå‡ºåŠ›å½¢å¼
- **Lambdaé–¢æ•°ã‚’ç›´æ¥ä½¿ç”¨**ã™ã‚‹ã“ã¨ã§ã€3ã¤ã®å®Ÿè¡Œç’°å¢ƒã§å®Œå…¨ã«åŒã˜å‡ºåŠ›
- åŒã˜é–¢æ•°ã‹ã‚‰å‘¼ã³å‡ºã—ã€åŒã˜ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã€åŒã˜ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **é‡è¤‡ã‚³ãƒ¼ãƒ‰ã®å®Œå…¨æ’é™¤**ã«ã‚ˆã‚Šä¿å®ˆæ€§ãŒå¤§å¹…å‘ä¸Š

### ğŸ“Š åŒ…æ‹¬çš„ãªé‡‘èãƒ‡ãƒ¼ã‚¿ï¼ˆ30ç¨®é¡ä»¥ä¸Šï¼‰
- **åŸºæœ¬æƒ…å ±**ï¼ˆä¼æ¥­åã€æ¥­ç•Œã€ã‚»ã‚¯ã‚¿ãƒ¼ã€ãƒ­ã‚´URLï¼‰
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¾¡æ ¼æƒ…å ±**ï¼ˆç¾åœ¨ä¾¡æ ¼ã€å¤‰åŒ–ç‡ã€é€šè²¨ï¼‰
- **ESGæƒ…å ±**ï¼ˆç’°å¢ƒãƒ»ç¤¾ä¼šãƒ»ã‚¬ãƒãƒŠãƒ³ã‚¹ã‚¹ã‚³ã‚¢ï¼‰
- **è²¡å‹™è«¸è¡¨**ï¼ˆæç›Šè¨ˆç®—æ›¸ã€è²¸å€Ÿå¯¾ç…§è¡¨ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼ï¼‰
- **æ ªä¸»æƒ…å ±**ï¼ˆå¤§æ ªä¸»ã€æ©Ÿé–¢æŠ•è³‡å®¶ã€æŠ•è³‡ä¿¡è¨—ï¼‰
- **ã‚¢ãƒŠãƒªã‚¹ãƒˆæƒ…å ±**ï¼ˆæ¨å¥¨ã€ç›®æ¨™ä¾¡æ ¼ã€æ ¼ä»˜ã‘ï¼‰
- **ãƒ‹ãƒ¥ãƒ¼ã‚¹æƒ…å ±**ï¼ˆä¼æ¥­é–¢é€£ãƒ‹ãƒ¥ãƒ¼ã‚¹ï¼‰
- **ã‚ªãƒ—ã‚·ãƒ§ãƒ³æƒ…å ±**ï¼ˆã‚³ãƒ¼ãƒ«ãƒ»ãƒ—ãƒƒãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- **é…å½“ãƒ»æ ªå¼åˆ†å‰²æƒ…å ±**
- **æ ªä¾¡å±¥æ­´**ï¼ˆã‚«ã‚¹ã‚¿ãƒ æœŸé–“å¯¾å¿œï¼‰
- **ISINæƒ…å ±**
- **é‡‘èãƒ‹ãƒ¥ãƒ¼ã‚¹RSS**ï¼ˆYahoo Financeãƒ»MarketWatchï¼‰
- **æ ªä¾¡é–¢é€£ãƒ©ãƒ³ã‚­ãƒ³ã‚°**ï¼ˆä¸Šæ˜‡ç‡ã€ä¸‹è½ç‡ã€å‡ºæ¥é«˜ã€æ™‚ä¾¡ç·é¡ï¼‰
- **ã‚»ã‚¯ã‚¿ãƒ¼ãƒ»æ¥­ç•Œãƒ©ãƒ³ã‚­ãƒ³ã‚°**
- **æš—å·é€šè²¨ãƒ©ãƒ³ã‚­ãƒ³ã‚°**
- **ä¸»è¦æŒ‡æ•°æƒ…å ±**
- **ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆ**
- **å•†å“ä¾¡æ ¼**
- **å¸‚å ´é–‹é–‰çŠ¶æ³**
- ãã®ä»–è©³ç´°ãƒ‡ãƒ¼ã‚¿

### ğŸ”Œ æŸ”è»ŸãªAPIè¨­è¨ˆ
- **çµ±åˆç‰ˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `/tickerDetail` - å…¨è¦ç´ ã‚’ä¸€åº¦ã«å–å¾—
- **å€‹åˆ¥ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: å„è¦ç´ ã‚’å€‹åˆ¥ã«å–å¾—å¯èƒ½
  - `/ticker/basic` - åŸºæœ¬æƒ…å ±ã®ã¿
  - `/ticker/price` - æ ªä¾¡æƒ…å ±ã®ã¿
  - `/ticker/history` - å±¥æ­´æƒ…å ±ã®ã¿
  - `/ticker/financials` - è²¡å‹™æƒ…å ±ã®ã¿
  - `/ticker/analysts` - ã‚¢ãƒŠãƒªã‚¹ãƒˆæƒ…å ±ã®ã¿
  - `/ticker/holders` - æ ªä¸»æƒ…å ±ã®ã¿
  - `/ticker/events` - ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã®ã¿
  - `/ticker/news` - ãƒ‹ãƒ¥ãƒ¼ã‚¹æƒ…å ±ã®ã¿
  - `/ticker/options` - ã‚ªãƒ—ã‚·ãƒ§ãƒ³æƒ…å ±ã®ã¿
  - `/ticker/sustainability` - ESGæƒ…å ±ã®ã¿
- **åŠ¹ç‡çš„ãªãƒ‡ãƒ¼ã‚¿å–å¾—**: å¿…è¦ãªæƒ…å ±ã®ã¿ã‚’å–å¾—ã—ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“ã‚’çŸ­ç¸®
- **é‡è¤‡æ’é™¤**: å„è¦ç´ å°‚ç”¨é–¢æ•°ã‚’çµ±åˆç‰ˆã§å†åˆ©ç”¨

### ğŸ  çµ±åˆãƒãƒ¼ã‚±ãƒƒãƒˆæ¦‚è¦æ©Ÿèƒ½
- **çµ±åˆãƒ›ãƒ¼ãƒ ç”»é¢API** (`/home`): **7ã¤ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’çµ±åˆ**
  - ğŸ“° é‡‘èãƒ‹ãƒ¥ãƒ¼ã‚¹ï¼ˆnews/rssï¼‰
  - ğŸ“ˆ æ ªä¾¡ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆrankings/stocksï¼‰
  - ğŸ¢ ã‚»ã‚¯ã‚¿ãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆrankings/sectorsï¼‰
  - ğŸ“Š ä¸»è¦æŒ‡æ•°ï¼ˆmarkets/indicesï¼‰
  - ğŸ’± ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆï¼ˆmarkets/currenciesï¼‰
  - ğŸ›¢ï¸ å•†å“ä¾¡æ ¼ï¼ˆmarkets/commoditiesï¼‰
  - ğŸŒ å¸‚å ´é–‹é–‰çŠ¶æ³ï¼ˆmarkets/statusï¼‰
- **ãƒ¯ãƒ³ã‚¹ãƒˆãƒƒãƒ—API**: 1å›ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§åŒ…æ‹¬çš„ãªãƒãƒ¼ã‚±ãƒƒãƒˆæƒ…å ±ã‚’å–å¾—

### ğŸ” é«˜é€Ÿãªæ ªå¼æ¤œç´¢æ©Ÿèƒ½
- è¤‡æ•°åœ°åŸŸå¯¾å¿œï¼ˆUS, JP, DE, CA, AU, GB, FR, IT, ES, KR, IN, HK, SGï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¾¡æ ¼æƒ…å ±ä»˜ã
- ãƒ•ã‚¡ã‚¸ãƒ¼æ¤œç´¢å¯¾å¿œ

### ğŸš€ å®Œå…¨å®‰å®šç¨¼åƒ
- **ãƒ†ã‚¹ãƒˆæˆåŠŸç‡**: **100%** (21/21 ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ)
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: å®Œå…¨å¯¾å¿œæ¸ˆã¿
- **ãƒ‡ãƒ¼ã‚¿å¤‰æ›**: å …ç‰¢ãªDataFrame/JSONå¤‰æ›
- **NaNå€¤å‡¦ç†**: å®Œå…¨å¯¾å¿œ
- **æ—¥ä»˜å‡¦ç†**: JSON serializable

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### çµ±ä¸€æ–¹å¼ï¼šLambdaé–¢æ•°ç›´æ¥ä½¿ç”¨
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   yfinance_     â”‚    â”‚   Docker        â”‚    â”‚   AWS Lambda    â”‚
â”‚   cli.py        â”‚    â”‚   Container     â”‚    â”‚   (æœ¬ç•ªç’°å¢ƒ)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ lambda_function â”‚
                    â”‚      .py        â”‚
                    â”‚  (å…±é€šé–¢æ•°ç¾¤)    â”‚
                    â”‚  âœ… 100% å®‰å®š   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é‡è¤‡æ’é™¤ã®ä»•çµ„ã¿
- **å…±é€šé–¢æ•°ã‚’`lambda_function.py`ã«é›†ç´„**
  - `serialize_for_json()`: JSONå¤‰æ›ï¼ˆNaNå€¤å¯¾å¿œï¼‰
  - `safe_dataframe_to_*()`: å …ç‰¢ãªDataFrameå¤‰æ›
  - `format_currency()`: é€šè²¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
  - `get_execution_info()`: å®Ÿè¡Œç’°å¢ƒæƒ…å ±
  - `validate_ticker_parameter()`: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **å„è¦ç´ å°‚ç”¨é–¢æ•°ã®å†åˆ©ç”¨**
  - 10å€‹ã®å€‹åˆ¥APIé–¢æ•°ã‚’çµ±åˆç‰ˆã§å†åˆ©ç”¨
  - é‡è¤‡ã‚³ãƒ¼ãƒ‰ã‚’å®Œå…¨æ’é™¤
  - ä¿å®ˆæ€§ã¨ä¸€è²«æ€§ã‚’ç¢ºä¿

## ğŸš€ å®Ÿè¡Œæ–¹æ³•

### 1. ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œ
```bash
# CLIãƒ„ãƒ¼ãƒ«å®Ÿè¡Œï¼ˆçµ±åˆç‰ˆï¼‰
python yfinance_cli.py tickerDetail AAPL --period 1mo

# CLIãƒ„ãƒ¼ãƒ«å®Ÿè¡Œï¼ˆå€‹åˆ¥è¦ç´ ï¼‰
python yfinance_cli.py basic AAPL
python yfinance_cli.py price AAPL
python yfinance_cli.py history AAPL --period 1y
python yfinance_cli.py financials AAPL
python yfinance_cli.py analysts AAPL
python yfinance_cli.py holders AAPL
python yfinance_cli.py events AAPL
python yfinance_cli.py news AAPL
python yfinance_cli.py options AAPL
python yfinance_cli.py sustainability AAPL

# ãƒãƒ¼ã‚±ãƒƒãƒˆæƒ…å ±
python yfinance_cli.py home
python yfinance_cli.py news_rss --limit 10
python yfinance_cli.py rankings_stocks --type gainers --market sp500 --limit 10
python yfinance_cli.py rankings_sectors --limit 10
python yfinance_cli.py rankings_crypto --sort change --limit 10
python yfinance_cli.py markets_indices
python yfinance_cli.py markets_currencies
python yfinance_cli.py markets_commodities
python yfinance_cli.py markets_status

# æ¤œç´¢æ©Ÿèƒ½
python yfinance_cli.py search apple --region US
```

### 2. Dockerå®Ÿè¡Œ

#### ğŸ§ª å®Œå…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
# å…¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ä¸€æ‹¬ãƒ†ã‚¹ãƒˆï¼ˆæ¨å¥¨ï¼‰
bash docker_local_fulltest.sh

# çµæœ: 21/21 SUCCESSï¼ˆ100%ï¼‰
```

#### å€‹åˆ¥å®Ÿè¡Œ
```bash
# çµ±åˆç‰ˆ
docker-compose run --rm --entrypoint="" yfinance-local python yfinance_cli.py tickerDetail AAPL

# å€‹åˆ¥è¦ç´ 
docker-compose run --rm --entrypoint="" yfinance-local python yfinance_cli.py basic AAPL
docker-compose run --rm --entrypoint="" yfinance-local python yfinance_cli.py price AAPL
docker-compose run --rm --entrypoint="" yfinance-local python yfinance_cli.py financials AAPL

# ãƒãƒ¼ã‚±ãƒƒãƒˆæƒ…å ±
docker-compose run --rm --entrypoint="" yfinance-local python yfinance_cli.py home
docker-compose run --rm --entrypoint="" yfinance-local python yfinance_cli.py rankings_stocks --type gainers
```

#### ğŸ¯ AWS Lambda ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
```bash
# SAM CLIä½¿ç”¨ã®Lambdaã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
bash test_lambda_simulator.sh
```

### 3. AWS Lambda ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# AWS SAMã§ãƒ“ãƒ«ãƒ‰ & ãƒ‡ãƒ—ãƒ­ã‚¤
sam build
sam deploy --guided

# ã¾ãŸã¯å¾“æ¥ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
bash deploy.sh
bash cleanup_and_deploy.sh
```

### 4. API GatewayçµŒç”±ã§ã‚¢ã‚¯ã‚»ã‚¹
```bash
# çµ±åˆç‰ˆ
curl "https://your-api-gateway-url/prod/tickerDetail?ticker=AAPL&period=1mo"

# å€‹åˆ¥è¦ç´ 
curl "https://your-api-gateway-url/prod/ticker/basic?ticker=AAPL"
curl "https://your-api-gateway-url/prod/ticker/price?ticker=AAPL"
curl "https://your-api-gateway-url/prod/ticker/financials?ticker=AAPL"

# ãƒãƒ¼ã‚±ãƒƒãƒˆæƒ…å ±
curl "https://your-api-gateway-url/prod/home"
curl "https://your-api-gateway-url/prod/news/rss?limit=10"
curl "https://your-api-gateway-url/prod/rankings/stocks?type=gainers&market=sp500&limit=10"
curl "https://your-api-gateway-url/prod/markets/indices"
```

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
YFinanceDocker/
â”œâ”€â”€ lambda_function.py          # âœ… ãƒ¡ã‚¤ãƒ³Lambdaé–¢æ•°ï¼ˆ100%å®‰å®šï¼‰
â”œâ”€â”€ yfinance_cli.py             # âœ… CLIãƒ„ãƒ¼ãƒ«ï¼ˆå…¨æ©Ÿèƒ½å¯¾å¿œï¼‰
â”œâ”€â”€ test_all_endpoints_direct.py  # âœ… ç›´æ¥ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ docker_local_fulltest.sh    # âœ… ä¸€æ‹¬ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ test_lambda_simulator.sh    # âœ… Lambdaã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ docker-compose.yml          # âœ… Dockerè¨­å®šï¼ˆLocal + Lambda-simï¼‰
â”œâ”€â”€ Dockerfile                  # âœ… Lambdaç”¨Dockerè¨­å®š
â”œâ”€â”€ template.yaml               # âœ… CloudFormationãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”œâ”€â”€ requirements.txt            # âœ… Pythonä¾å­˜é–¢ä¿‚
â”œâ”€â”€ deploy.sh                   # âœ… ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ cleanup_and_deploy.sh       # âœ… ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—&ãƒ‡ãƒ—ãƒ­ã‚¤
â””â”€â”€ README.md                   # âœ… ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆæœ€æ–°ç‰ˆï¼‰

# ğŸ—‘ï¸ å‰Šé™¤æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆé‡è¤‡æ’é™¤ï¼‰
# - yfinance_sample.py
# - local_test.py  
# - yfinance_search.py
# - test_search_with_price.py
# - swagger_generator_advanced.py
# - update_api_url.sh
# - yfinance.sh
```

## ğŸ”§ ç’°å¢ƒå¤‰æ•°

| å¤‰æ•°å | èª¬æ˜ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ |
|--------|------|-------------|
| `EXECUTION_MODE` | å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ï¼ˆLOCAL/DOCKER/LAMBDAï¼‰ | `LOCAL` |

## ğŸ”Œ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

### 1. ğŸ” æ¤œç´¢ API
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `/search`
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**: `q` (æ¤œç´¢ã‚¯ã‚¨ãƒª), `region` (åœ°åŸŸ)
- **ä¾‹**: `GET /search?q=apple&region=US`

### 2. ğŸ“Š åŒ…æ‹¬çš„æƒ…å ± APIï¼ˆçµ±åˆç‰ˆï¼‰
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `/tickerDetail`
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**: `ticker` (å¿…é ˆ), `period` (å±¥æ­´æœŸé–“)
- **ä¾‹**: `GET /tickerDetail?ticker=AAPL&period=1y`
- **èª¬æ˜**: å…¨ã¦ã®è¦ç´ ã‚’çµ±åˆã—ã¦è¿”ã™ï¼ˆå€‹åˆ¥é–¢æ•°ã‚’å†…éƒ¨ã§å‘¼ã³å‡ºã—ï¼‰

### 3. ğŸ§© å€‹åˆ¥è¦ç´  API

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ | ä¾‹ |
|---------------|------|---|
| `/ticker/basic` | åŸºæœ¬æƒ…å ± | `GET /ticker/basic?ticker=AAPL` |
| `/ticker/price` | æ ªä¾¡æƒ…å ± | `GET /ticker/price?ticker=AAPL` |
| `/ticker/history` | å±¥æ­´æƒ…å ± | `GET /ticker/history?ticker=AAPL&period=1y` |
| `/ticker/financials` | è²¡å‹™æƒ…å ± | `GET /ticker/financials?ticker=AAPL` |
| `/ticker/analysts` | ã‚¢ãƒŠãƒªã‚¹ãƒˆæƒ…å ± | `GET /ticker/analysts?ticker=AAPL` |
| `/ticker/holders` | æ ªä¸»æƒ…å ± | `GET /ticker/holders?ticker=AAPL` |
| `/ticker/events` | ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ± | `GET /ticker/events?ticker=AAPL` |
| `/ticker/news` | ãƒ‹ãƒ¥ãƒ¼ã‚¹æƒ…å ± | `GET /ticker/news?ticker=AAPL` |
| `/ticker/options` | ã‚ªãƒ—ã‚·ãƒ§ãƒ³æƒ…å ± | `GET /ticker/options?ticker=AAPL` |
| `/ticker/sustainability` | ESGæƒ…å ± | `GET /ticker/sustainability?ticker=AAPL` |

### 4. ğŸ  çµ±åˆãƒãƒ¼ã‚±ãƒƒãƒˆæ¦‚è¦ APIï¼ˆâœ¨NEW!ï¼‰

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ | çµ±åˆã•ã‚ŒãŸæ©Ÿèƒ½ |
|---------------|------|-------------|
| `/home` | **çµ±åˆãƒ›ãƒ¼ãƒ ç”»é¢** | ğŸ“° ãƒ‹ãƒ¥ãƒ¼ã‚¹ + ğŸ“ˆ æ ªä¾¡ãƒ©ãƒ³ã‚­ãƒ³ã‚° + ğŸ¢ ã‚»ã‚¯ã‚¿ãƒ¼ + ğŸ“Š æŒ‡æ•° + ğŸ’± ç‚ºæ›¿ + ğŸ›¢ï¸ å•†å“ + ğŸŒ å¸‚å ´çŠ¶æ³ |

**ç‰¹å¾´**: 7ã¤ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’1ã¤ã«çµ±åˆï¼ãƒ¯ãƒ³ã‚¹ãƒˆãƒƒãƒ—ã§ãƒãƒ¼ã‚±ãƒƒãƒˆå…¨ä½“ã‚’æŠŠæ¡

### 5. ğŸ“° ãƒ‹ãƒ¥ãƒ¼ã‚¹ API

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ | ä¾‹ |
|---------------|------|---|
| `/news/rss` | é‡‘èãƒ‹ãƒ¥ãƒ¼ã‚¹RSS | `GET /news/rss?limit=10` |

**ğŸ“° ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚½ãƒ¼ã‚¹:**
- **Yahoo Finance RSS**: `https://finance.yahoo.com/rss/2.0` (ä¸€èˆ¬é‡‘èãƒ‹ãƒ¥ãƒ¼ã‚¹)
- **MarketWatch Top Stories**: `https://www.marketwatch.com/rss/topstories` (å¸‚å ´ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ»ç”»åƒä»˜ã)

### 6. ğŸ“ˆ ãƒ©ãƒ³ã‚­ãƒ³ã‚° API

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ | ä¾‹ |
|---------------|------|---|
| `/rankings/stocks` | æ ªä¾¡ãƒ©ãƒ³ã‚­ãƒ³ã‚° | `GET /rankings/stocks?type=gainers&market=sp500&limit=10` |
| `/rankings/sectors` | ã‚»ã‚¯ã‚¿ãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚° | `GET /rankings/sectors?limit=10` |
| `/rankings/crypto` | æš—å·é€šè²¨ãƒ©ãƒ³ã‚­ãƒ³ã‚° | `GET /rankings/crypto?sort=change&limit=10` |

### 7. ğŸŒ ãƒãƒ¼ã‚±ãƒƒãƒˆæƒ…å ± API

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | èª¬æ˜ | ä¾‹ |
|---------------|------|---|
| `/markets/indices` | ä¸»è¦æŒ‡æ•° | `GET /markets/indices` |
| `/markets/currencies` | ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆ | `GET /markets/currencies` |
| `/markets/commodities` | å•†å“ä¾¡æ ¼ | `GET /markets/commodities` |
| `/markets/status` | å¸‚å ´é–‹é–‰çŠ¶æ³ | `GET /markets/status` |

## ğŸ“Š å‡ºåŠ›ä¾‹

### ğŸ” æ¤œç´¢çµæœ
```json
{
  "query": "apple",
  "region": "US",
  "count": 5,
  "results": [
    {
      "symbol": "AAPL",
      "name": "Apple Inc.",
      "exchange": "NMS",
      "type": "EQUITY",
      "current_price": 213.45,
      "currency": "USD",
      "price_change": 2.15,
      "price_change_percent": 1.02,
      "price_change_direction": "up"
    }
  ],
  "execution_info": {
    "mode": "DOCKER",
    "timestamp": "2025-07-24T14:49:56",
    "server": "lambda"
  }
}
```

### ğŸ  çµ±åˆãƒ›ãƒ¼ãƒ ç”»é¢æƒ…å ±ï¼ˆâœ¨NEW!ï¼‰
```json
{
  "news_rss": {
    "status": "success",
    "data": [
      {
        "title": "S&P 500 scores 5th straight record high",
        "summary": "Wall Street's so-called fear gauge dropped...",
        "url": "https://www.marketwatch.com/story/...",
        "source": "MarketWatch Top Stories",
        "image_url": "https://images.mktw.net/im-28297331",
        "published_at": "2025-07-25T22:34:00"
      }
    ],
    "metadata": {
      "total_sources": 2,
      "sources_used": ["Yahoo Finance", "MarketWatch Top Stories"]
    }
  },
  "rankings_stocks": {
    "gainers": {
      "status": "success",
      "data": [
        {
          "symbol": "NVDA",
          "name": "NVIDIA Corporation",
          "current_price": 850.25,
          "price_change_percent": 3.68
        }
      ]
    },
    "losers": { ... }
  },
  "markets_indices": {
    "status": "success",
    "data": [
      {
        "index": "S&P 500",
        "symbol": "^GSPC",
        "current_price": 5892.35,
        "price_change_percent": 0.26
      }
    ]
  },
  "markets_currencies": { ... },
  "markets_commodities": { ... },
  "markets_status": { ... },
  "endpoints_integrated": [
    "news/rss", "rankings/stocks", "rankings/sectors",
    "markets/indices", "markets/currencies", 
    "markets/commodities", "markets/status"
  ]
}
```

### ğŸ“Š åŒ…æ‹¬çš„æƒ…å ±ï¼ˆçµ±åˆç‰ˆï¼‰
```json
{
  "ticker": "AAPL",
  "period": "1mo",
  "info": {
    "longName": "Apple Inc.",
    "industry": "Consumer Electronics",
    "sector": "Technology",
    "logo_url": "https://logo.clearbit.com/apple.com"
  },
  "price": {
    "current_price": 213.45,
    "currency": "USD",
    "price_change": 2.15,
    "price_change_percent": 1.02
  },
  "financials": {
    "income_statement": {
      "Total Revenue": {
        "2024-09-30 00:00:00": 391035000000.0,
        "2023-09-30 00:00:00": 383285000000.0
      }
    },
    "earnings": {
      "trailingEps": 6.42,
      "forwardEps": 8.31,
      "trailingPE": 33.37,
      "forwardPE": 25.78
    }
  },
  "execution_info": {
    "mode": "DOCKER",
    "timestamp": "2025-07-24T14:49:56",
    "server": "lambda"
  }
}
```

### ğŸ“ˆ ãƒ©ãƒ³ã‚­ãƒ³ã‚°æƒ…å ±ï¼ˆç”»åƒä»˜ãï¼‰
```json
{
  "status": "success",
  "type": "gainers",
  "market": "sp500",
  "data": [
    {
      "symbol": "NVDA",
      "name": "NVIDIA Corporation",
      "current_price": 850.25,
      "price_change": 30.15,
      "price_change_percent": 3.68,
      "volume": 45000000,
      "market_cap": 2100000000000,
      "currency": "USD"
    }
  ],
  "chart_image": "iVBORw0KGgoAAAANSUhEUgAA...",
  "metadata": {
    "total_stocks": 10,
    "limit": 10,
    "last_updated": "2025-07-24T14:30:00Z"
  }
}
```

### âš ï¸ éƒ¨åˆ†ã‚¨ãƒ©ãƒ¼ã®ä¾‹ï¼ˆçµ±åˆç‰ˆï¼‰
```json
{
  "ticker": "AAPL",
  "info": {
    "longName": "Apple Inc.",
    "industry": "Consumer Electronics"
  },
  "price": {
    "current_price": 213.45,
    "currency": "USD"
  },
  "partial_errors": [
    "è²¡å‹™æƒ…å ±: ãƒ‡ãƒ¼ã‚¿ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“",
    "ã‚ªãƒ—ã‚·ãƒ§ãƒ³æƒ…å ±: ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“"
  ],
  "execution_info": {
    "mode": "DOCKER",
    "timestamp": "2025-07-24T14:49:56",
    "server": "lambda"
  }
}
```

## ğŸ¯ çµ±ä¸€ã®åˆ©ç‚¹

### 1. ğŸš€ é–‹ç™ºåŠ¹ç‡ã®å‘ä¸Š
- **åŒã˜é–¢æ•°ã‚’ä½¿ç”¨**: 3ã¤ã®ç’°å¢ƒã§åŒã˜ãƒ­ã‚¸ãƒƒã‚¯
- **ãƒ‡ãƒãƒƒã‚°ã®ç°¡ç´ åŒ–**: å•é¡Œã®ç‰¹å®šãŒå®¹æ˜“
- **ãƒ†ã‚¹ãƒˆã®çµ±ä¸€**: åŒã˜ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§å…¨ç’°å¢ƒã‚’æ¤œè¨¼

### 2. ğŸ› ï¸ ä¿å®ˆæ€§ã®å‘ä¸Š
- **é‡è¤‡ã‚³ãƒ¼ãƒ‰ã®å®Œå…¨æ’é™¤**: å…±é€šé–¢æ•°ã‚’ä¸€ç®‡æ‰€ã§ç®¡ç†
- **ä¸€è²«æ€§ã®ç¢ºä¿**: å‡ºåŠ›å½¢å¼ãŒå®Œå…¨ã«çµ±ä¸€
- **å¤‰æ›´ã®ç°¡ç´ åŒ–**: ä¿®æ­£ã¯`lambda_function.py`ã®ã¿

### 3. ğŸ”’ ä¿¡é ¼æ€§ã®å‘ä¸Š
- **åŒã˜ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: å…¨ç’°å¢ƒã§çµ±ä¸€ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼å‡¦ç†
- **ãƒ‡ãƒ¼ã‚¿å“è³ªã®ä¿è¨¼**: åŒã˜ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ­ã‚¸ãƒƒã‚¯
- **å®Ÿè¡Œç’°å¢ƒæƒ…å ±ã®è‡ªå‹•ä»˜ä¸**: ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ã®ç¢ºä¿

## ğŸ§ª ãƒ†ã‚¹ãƒˆçµæœ

### âœ… å®Œå…¨å®‰å®šç¨¼åƒé”æˆ
```bash
============================================================
ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœã‚µãƒãƒªãƒ¼
============================================================
ğŸ”¢ ç·ãƒ†ã‚¹ãƒˆæ•°: 21
âœ… æˆåŠŸ: 21
âŒ å¤±æ•—: 0
ğŸ“ˆ æˆåŠŸç‡: 100.0%
============================================================
```

### ğŸ”§ è§£æ¶ˆã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼
1. âœ… `The truth value of an array with more than one element is ambiguous`
2. âœ… `Object of type date is not JSON serializable`
3. âœ… `cannot convert float NaN to integer`
4. âœ… `'dict' object has no attribute 'empty'`
5. âœ… å¤ã„`yfinance`ãƒ¡ã‚½ãƒƒãƒ‰ä½¿ç”¨å•é¡Œ
6. âœ… `pd.isna()` with ãƒªã‚¹ãƒˆ/é…åˆ—ã‚¨ãƒ©ãƒ¼

### ğŸ“Š å€‹åˆ¥ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ†ã‚¹ãƒˆçµæœ
| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | è©³ç´° |
|---------------|-----------|------|
| search | âœ… SUCCESS | æ¤œç´¢æ©Ÿèƒ½æ­£å¸¸ |
| tickerDetail | âœ… SUCCESS | çµ±åˆç‰ˆAPIæ­£å¸¸ |
| basic | âœ… SUCCESS | åŸºæœ¬æƒ…å ±å–å¾—æ­£å¸¸ |
| price | âœ… SUCCESS | æ ªä¾¡æƒ…å ±å–å¾—æ­£å¸¸ |
| history | âœ… SUCCESS | å±¥æ­´æƒ…å ±å–å¾—æ­£å¸¸ |
| financials | âœ… SUCCESS | è²¡å‹™æƒ…å ±å–å¾—æ­£å¸¸ |
| analysts | âœ… SUCCESS | ã‚¢ãƒŠãƒªã‚¹ãƒˆæƒ…å ±å–å¾—æ­£å¸¸ |
| holders | âœ… SUCCESS | æ ªä¸»æƒ…å ±å–å¾—æ­£å¸¸ |
| events | âœ… SUCCESS | ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±å–å¾—æ­£å¸¸ |
| news | âœ… SUCCESS | ãƒ‹ãƒ¥ãƒ¼ã‚¹æƒ…å ±å–å¾—æ­£å¸¸ |
| options | âœ… SUCCESS | ã‚ªãƒ—ã‚·ãƒ§ãƒ³æƒ…å ±å–å¾—æ­£å¸¸ |
| sustainability | âœ… SUCCESS | ESGæƒ…å ±å–å¾—æ­£å¸¸ |
| home | âœ… SUCCESS | ãƒ›ãƒ¼ãƒ ç”»é¢æƒ…å ±å–å¾—æ­£å¸¸ |
| news_rss | âœ… SUCCESS | RSSãƒ‹ãƒ¥ãƒ¼ã‚¹å–å¾—æ­£å¸¸ |
| rankings_stocks | âœ… SUCCESS | æ ªä¾¡ãƒ©ãƒ³ã‚­ãƒ³ã‚°å–å¾—æ­£å¸¸ |
| rankings_sectors | âœ… SUCCESS | ã‚»ã‚¯ã‚¿ãƒ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°å–å¾—æ­£å¸¸ |
| rankings_crypto | âœ… SUCCESS | æš—å·é€šè²¨ãƒ©ãƒ³ã‚­ãƒ³ã‚°å–å¾—æ­£å¸¸ |
| markets_indices | âœ… SUCCESS | ä¸»è¦æŒ‡æ•°å–å¾—æ­£å¸¸ |
| markets_currencies | âœ… SUCCESS | ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆå–å¾—æ­£å¸¸ |
| markets_commodities | âœ… SUCCESS | å•†å“ä¾¡æ ¼å–å¾—æ­£å¸¸ |
| markets_status | âœ… SUCCESS | å¸‚å ´é–‹é–‰çŠ¶æ³å–å¾—æ­£å¸¸ |

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Python 3.12**
- **YFinance**: æ ªå¼ãƒ‡ãƒ¼ã‚¿å–å¾—
- **Pandas/NumPy**: ãƒ‡ãƒ¼ã‚¿å‡¦ç†
- **AWS Lambda**: ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹å®Ÿè¡Œç’°å¢ƒ
- **Docker**: ã‚³ãƒ³ãƒ†ãƒŠåŒ–
- **AWS API Gateway**: RESTful API
- **AWS SAM CLI**: Lambda ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
- **CloudFormation**: ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ç®¡ç†
- **Matplotlib**: ãƒãƒ£ãƒ¼ãƒˆç”Ÿæˆ
- **Feedparser**: RSSãƒ‹ãƒ¥ãƒ¼ã‚¹å–å¾—
  - Yahoo Finance RSS (https://finance.yahoo.com/rss/2.0)
  - MarketWatch RSS (https://www.marketwatch.com/rss/topstories)

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

1. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ (`git checkout -b feature/amazing-feature`)
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ (`git commit -m 'Add amazing feature'`)
4. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ (`git push origin feature/amazing-feature`)
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

å•é¡Œã‚„è³ªå•ãŒã‚ã‚‹å ´åˆã¯ã€GitHubã®Issuesãƒšãƒ¼ã‚¸ã§ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚

---

## ğŸ‰ æœ€æ–°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

### âœ… 2025å¹´7æœˆ24æ—¥ - å®Œå…¨å®‰å®šç‰ˆãƒªãƒªãƒ¼ã‚¹
- **100%ãƒ†ã‚¹ãƒˆæˆåŠŸ**: 21/21ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒæ­£å¸¸å‹•ä½œ
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Œå…¨å¯¾å¿œ**: å…¨ãƒ‡ãƒ¼ã‚¿å¤‰æ›ã‚¨ãƒ©ãƒ¼ã‚’è§£æ¶ˆ
- **å …ç‰¢ãªJSONå¤‰æ›**: NaNå€¤ã€æ—¥ä»˜ã€DataFrameå‡¦ç†ã‚’å®Œå…¨å¯¾å¿œ
- **å€‹åˆ¥APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: åŠ¹ç‡çš„ãªãƒ‡ãƒ¼ã‚¿å–å¾—ã«å¯¾å¿œ
- **ãƒãƒ¼ã‚±ãƒƒãƒˆæ¦‚è¦æ©Ÿèƒ½**: ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã€ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€å¸‚å ´æƒ…å ±ã‚’è¿½åŠ 
- **AWS Lambda ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼**: SAM CLIå¯¾å¿œ
- **é‡è¤‡ã‚³ãƒ¼ãƒ‰å®Œå…¨æ’é™¤**: ä¿å®ˆæ€§ã‚’å¤§å¹…å‘ä¸Š 